<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="AfterBoard">

<typeAlias alias="board" type="pro.postscription.vo.Postscription"/>
	
<insert id="addAfterBoard" parameterClass="board">
	insert into postscription
	(postscription_no, postscription_title, postscription_content, postscription_regdate,
		 postscription_grade, postscription_active, student_no, course_no)
	values
	(postscription_no_seq.nextval, #title#, #content#, #regdate#, #grade#,
		#active#, #student.no#, #course.no#)
</insert>

<select id="getAllAfterBoard" resultClass="board">
	select
		A.postscription_no 			as no,
		A.postscription_title			as title,
		A.postscription_content		as content,
		A.postscription_regdate		as	regDate,
		A.postscription_grade 		as grade,
		A.postscription_active		as active,
		A.student_no					as	"student.no",
		A.course_no					as	"course.no"
	from
		postscription A, student B
	where 
		A.student_no = B.student_no 
	order by 
		A.student_no desc
</select>

<delete id="deleteAfterBoardByNo" parameterClass="int">
	delete from postscription
	where postscription_no = #value#
</delete>

<select id="getAfterBoardByNo" parameterClass="int" resultClass="board">
	select
		postscription_no 			as no,
		postscription_title			as title,
		postscription_content		as content,
		postscription_regdate		as	regDate,
		postscription_grade 		as grade,
		postscription_active		as active,
		student_no					as	"student.no",
		course_no					as	"course.no"
	from
		postscription
	where
		postscription_no = #value#
</select>

</sqlMap>