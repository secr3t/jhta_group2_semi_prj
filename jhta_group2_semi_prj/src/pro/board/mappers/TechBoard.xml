<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE sqlMap      
    PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"      
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="TechBoard">

<typeAlias alias="techboard" type="pro.tech.vo.Tech"/>
	
<insert id="addTechBoard" parameterClass="techboard">
	insert into tech
	(tech_no, tech_title, tech_ques_content, tech_ans_content,
	  tech_active,  student_no)
	values
	(tech_no_seq.nextval, #title#, #quesContent#, #ansContent#,
		#active#, #student.no#)
</insert>

<select id="getAllTechBoard" resultClass="techboard">
	select
		A.tech_no						as no, 
		A.tech_title					as title, 
		A.tech_ques_content				as quesContent,
		A.tech_ques_regdate				as quesRegdate,
		A.tech_ans_content				as	ansContent,
		A.tech_ans_regdate				as	ansRegdate,
	  	A.tech_active					as	active, 
	  	A.student_no					as  "student.no", 
	  	A.qtype_no						as qtypeNo
	from
		tech A, student B
	where 
		A.student_no = B.student_no
	order by 
		tech_no desc
</select>

<delete id="deleteTechBoardByNo" parameterClass="int">
	delete from tech
	where tech_no = #value#
</delete>

<select id="getTechBoardByNo" parameterClass="int" resultClass="techboard">
select
		tech_no						as no, 
		tech_title					as title, 
		tech_ques_content			as quesContent,
		tech_ques_regdate			as quesRegdate,
		tech_ans_content			as	ansContent,
		tech_ans_regdate			as	ansRegdate,
	  	tech_active					as	active, 
	  	student_no					as  "student.no", 
	  	qtype_no						as qtypeNo
	from
		tech
	where
		tech_no = #value#
</select>

</sqlMap>